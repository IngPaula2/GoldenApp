<!-- ========================================
   TEMPLATE PARA NUEVAS BÚSQUEDAS
   ======================================== -->

<!-- 
  INSTRUCCIONES DE USO:
  1. Reemplazar [ENTIDAD] con el nombre de la entidad (ej: "USUARIO", "PRODUCTO")
  2. Reemplazar [searchField] con el ID del campo de búsqueda
  3. Reemplazar [searchPlaceholder] con el placeholder del campo
  4. Reemplazar [searchLabel] con la etiqueta del campo
  5. Ajustar las columnas de la tabla según los datos de la entidad
  6. Actualizar los IDs y nombres de funciones
-->

<!-- Modal de Búsqueda de [ENTIDAD] -->
<div class="modal-overlay" id="search[ENTIDAD]Modal">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">BUSCAR [ENTIDAD]</h3>
            <button class="modal-close" onclick="hideSearch[ENTIDAD]Modal()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="[searchField]" class="form-label">[searchLabel] *</label>
                <input type="text" id="[searchField]" class="form-input" placeholder="[searchPlaceholder]">
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="hideSearch[ENTIDAD]Modal()">Cancelar</button>
            <button class="btn btn-primary" id="bBuscar[ENTIDAD]">Buscar</button>
        </div>
    </div>
</div>

<!-- Modal de Resultados de Búsqueda de [ENTIDAD] -->
<div class="modal-overlay" id="[entidad]ResultsModal">
    <div class="modal modal-results">
        <div class="modal-header">
            <h3 class="modal-title">RESULTADOS DE BÚSQUEDA - [ENTIDAD]</h3>
            <button class="modal-close" onclick="hide[ENTIDAD]ResultsModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="data-table">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Columna 1</th>
                            <th>Columna 2</th>
                            <th>Columna 3</th>
                            <th>Columna 4</th>
                            <th>Opciones</th>
                        </tr>
                    </thead>
                    <tbody id="[entidad]SearchResultsBody">
                        <tr>
                            <td colspan="5" class="no-data-message">
                                <div class="no-data-content">
                                    <i class="fas fa-search"></i>
                                    <p>No se encontraron resultados</p>
                                    <small>Intente con otro criterio de búsqueda</small>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="hide[ENTIDAD]ResultsModal()">Cerrar</button>
        </div>
    </div>
</div>

<!-- ========================================
   TEMPLATE JAVASCRIPT
   ======================================== -->

<script>
// Referencias a modales
const search[ENTIDAD]ModalOverlay = document.querySelector('#search[ENTIDAD]Modal.modal-overlay');
const [entidad]ResultsModalOverlay = document.querySelector('#[entidad]ResultsModal.modal-overlay');

// Funciones de control de modales
function showSearch[ENTIDAD]Modal() {
    search[ENTIDAD]ModalOverlay.style.display = 'flex';
    document.body.style.overflow = 'hidden';
    // Limpiar campo de búsqueda
    document.getElementById('[searchField]').value = '';
}

function hideSearch[ENTIDAD]Modal() {
    search[ENTIDAD]ModalOverlay.style.display = 'none';
    document.body.style.overflow = 'auto';
}

function show[ENTIDAD]ResultsModal() {
    [entidad]ResultsModalOverlay.style.display = 'flex';
    document.body.style.overflow = 'hidden';
}

function hide[ENTIDAD]ResultsModal() {
    [entidad]ResultsModalOverlay.style.display = 'none';
    document.body.style.overflow = 'auto';
}

// Event listeners
search[ENTIDAD]ModalOverlay.addEventListener('click', function(e) {
    if (e.target === search[ENTIDAD]ModalOverlay) {
        hideSearch[ENTIDAD]Modal();
    }
});

[entidad]ResultsModalOverlay.addEventListener('click', function(e) {
    if (e.target === [entidad]ResultsModalOverlay) {
        hide[ENTIDAD]ResultsModal();
    }
});

// Funcionalidad de búsqueda
const bBuscar[ENTIDAD] = document.getElementById('bBuscar[ENTIDAD]');
if (bBuscar[ENTIDAD]) {
    bBuscar[ENTIDAD].addEventListener('click', function() {
        const searchValue = document.getElementById('[searchField]').value.trim();
        
        if (!searchValue) {
            alert('Por favor, ingrese un criterio de búsqueda.');
            return;
        }
        
        const resultadoBusqueda = buscar[ENTIDAD](searchValue);
        
        if (resultadoBusqueda) {
            render[ENTIDAD]SearchResults(resultadoBusqueda);
            hideSearch[ENTIDAD]Modal();
            show[ENTIDAD]ResultsModal();
        } else {
            render[ENTIDAD]SearchResults(null);
            hideSearch[ENTIDAD]Modal();
            show[ENTIDAD]ResultsModal();
        }
    });
}

// Función de búsqueda (implementar según lógica de negocio)
function buscar[ENTIDAD](criterio) {
    // TODO: Implementar lógica de búsqueda
    // Ejemplo:
    // return [entidad]Data.find(item => item.campo === criterio);
    return null;
}

// Función de renderizado de resultados
function render[ENTIDAD]SearchResults(data) {
    const tbody = document.getElementById('[entidad]SearchResultsBody');
    
    if (!data) {
        tbody.innerHTML = `
            <tr>
                <td colspan="5" class="no-data-message">
                    <div class="no-data-content">
                        <i class="fas fa-search"></i>
                        <p>No se encontraron resultados</p>
                        <small>Intente con otro criterio de búsqueda</small>
                    </div>
                </td>
            </tr>
        `;
        return;
    }
    
    // TODO: Implementar renderizado de datos
    tbody.innerHTML = `
        <tr>
            <td>${data.campo1}</td>
            <td>${data.campo2}</td>
            <td>${data.campo3}</td>
            <td>${data.campo4}</td>
            <td>
                <button class="btn btn-small" onclick="editar[ENTIDAD]('${data.id}')">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn btn-small btn-danger" onclick="eliminar[ENTIDAD]('${data.id}')">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        </tr>
    `;
}

// Exponer funciones globalmente
window.hideSearch[ENTIDAD]Modal = hideSearch[ENTIDAD]Modal;
window.hide[ENTIDAD]ResultsModal = hide[ENTIDAD]ResultsModal;
window.showSearch[ENTIDAD]Modal = showSearch[ENTIDAD]Modal;

// Agregar al event listener de Escape
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        if (search[ENTIDAD]ModalOverlay.style.display === 'flex') {
            hideSearch[ENTIDAD]Modal();
        }
        if ([entidad]ResultsModalOverlay.style.display === 'flex') {
            hide[ENTIDAD]ResultsModal();
        }
    }
});
</script>

<!-- ========================================
   INSTRUCCIONES DE IMPLEMENTACIÓN
   ======================================== -->

<!-- 
  PASOS PARA IMPLEMENTAR:

  1. COPIAR Y PEGAR este template en el archivo HTML correspondiente
  
  2. REEMPLAZAR TODAS LAS OCURRENCIAS de:
     - [ENTIDAD] → Nombre de la entidad en mayúsculas (ej: "USUARIO")
     - [entidad] → Nombre de la entidad en minúsculas (ej: "usuario")
     - [searchField] → ID del campo de búsqueda (ej: "searchUsuarioId")
     - [searchLabel] → Etiqueta del campo (ej: "ID Usuario")
     - [searchPlaceholder] → Placeholder del campo (ej: "Ingrese el ID del usuario")
  
  3. AJUSTAR las columnas de la tabla según los datos de la entidad
  
  4. IMPLEMENTAR las funciones:
     - buscar[ENTIDAD]() → Lógica de búsqueda
     - render[ENTIDAD]SearchResults() → Renderizado de datos
     - editar[ENTIDAD]() → Función de edición
     - eliminar[ENTIDAD]() → Función de eliminación
  
  5. AGREGAR el botón que abre el modal de búsqueda:
     <button class="btn btn-primary" onclick="showSearch[ENTIDAD]Modal()">
         <i class="fas fa-search"></i> Buscar [ENTIDAD]
     </button>
  
  6. VERIFICAR que todos los IDs y nombres de funciones sean únicos
  
  7. PROBAR la funcionalidad completa
-->


