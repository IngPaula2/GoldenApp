<!DOCTYPE html>
<!--
    DASHBOARD ADMINISTRATIVO - GOLDEN APP
    
    Este archivo contiene la página principal del panel administrativo de ciudades.
    Incluye sidebar de navegación, barra superior, tablas de datos y modales.
    
    @author Equipo Golden Bridge
    @version 1.0.0
    @date 2024
-->
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Golden Bridge - Ciudades</title>
    
    <!-- ========================================
         RECURSOS EXTERNOS Y DEPENDENCIAS
         ======================================== -->
    
    <!-- CSS -->
    <link rel="stylesheet" href="../assets/css/reset.css">
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/admin-ciudades.css">
    
    <!-- Fuentes de Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Iconos Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="dashboard-page">
    <!-- ========================================
         SIDEBAR DE NAVEGACIÓN
         ======================================== -->
    
    <!-- Sidebar -->
    <aside class="sidebar">
        <!-- Sección de Perfil de Usuario -->
        <div class="user-profile">
            <div class="user-info">
                <i class="fas fa-user user-icon"></i>
                <span class="user-name">Auxiliar Admin</span>
                <i class="fas fa-chevron-down dropdown-arrow"></i>
            </div>
            
            <!-- Menú Desplegable del Usuario -->
            <div class="dropdown-menu" id="userDropdown">
                <div class="dropdown-item admin-users-item">
                    <i class="fas fa-users-cog dropdown-icon"></i>
                    <span>ADMINISTRAR USUARIOS</span>
                </div>
                <div class="dropdown-item logout-item">
                    <i class="fas fa-sign-out-alt dropdown-icon"></i>
                    <span>CERRAR SESIÓN</span>
                </div>
            </div>
        </div>

        <!-- Menú de Navegación Principal -->
        <nav class="sidebar-nav">
            <ul class="nav-list">
                <li class="nav-item active">
                    <a href="#" class="nav-link">
                        <i class="fas fa-clipboard-list nav-icon"></i>
                        <span>Administrativo</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <i class="fas fa-receipt nav-icon"></i>
                        <span>Facturación</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <i class="fas fa-building nav-icon"></i>
                        <span>Tesorería</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <i class="fas fa-cogs nav-icon"></i>
                        <span>Nómina</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <i class="fas fa-wallet nav-icon"></i>
                        <span>Cartera</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <i class="fas fa-search nav-icon"></i>
                        <span>Auditoria</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <i class="fas fa-calculator nav-icon"></i>
                        <span>Contabilidad</span>
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Sección del Logo -->
        <div class="sidebar-logo">
            <div class="logo-container">
                <img src="../assets/images/LOGO GOLDEN BRIDGE  SIN FONDO OF.png" alt="Golden Bridge" class="logo-image">
        
            </div>
        </div>
    </aside>

    <!-- ========================================
         CONTENIDO PRINCIPAL
         ======================================== -->
    
    <!-- Contenido Principal -->
    <main class="main-content">
        <!-- Navegación Superior -->
        <nav class="top-nav">
            <ul class="top-nav-list">
                <li class="top-nav-item active">
                    <a href="#" class="top-nav-link">Ciudades</a>
                </li>
                <li class="top-nav-item">
                    <a href="admin-titulares.html" class="top-nav-link">Titulares</a>
                </li>
                <li class="top-nav-item">
                    <a href="admin-cargos.html" class="top-nav-link">Cargos</a>
                </li>
                <li class="top-nav-item">
                    <a href="#" class="top-nav-link">Empleados</a>
                </li>
                <li class="top-nav-item">
                    <a href="#" class="top-nav-link">Organizaciones</a>
                </li>
                <li class="top-nav-item">
                    <a href="#" class="top-nav-link">Planes</a>
                </li>
                <li class="top-nav-item">
                    <a href="#" class="top-nav-link">Consecutivos</a>
                </li>
                <li class="top-nav-item">
                    <a href="#" class="top-nav-link">Control de Consecutivos</a>
                </li>
            </ul>
        </nav>

        <!-- Área de Contenido -->
        <div class="content-area">
            <!-- Sección de Ciudades -->
            <section class="cities-section">
                <div class="section-header">
                    <h2>Ciudades</h2>
                    <div class="action-buttons">
                        <button id="bBuscarCiudad" class="btn btn-primary" onclick="showCitySearchModal()">Buscar Ciudad</button>
                        <button id="bCrearCiudad" class="btn btn-primary" onclick="showCreateCityModal()">Crear Ciudad</button>
                    </div>
                </div>

                <div class="data-table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Código</th>
                                <th>Nombre</th>
                                <th>Dirección</th>
                                <th>Teléfono</th>
                                <th>Correo</th>
                                <th>Opciones</th>
                            </tr>
                        </thead>
                        <tbody id="ciudadesTableBody">
                            <tr>
                                <td colspan="6" class="no-data-message">
                                    <div class="no-data-content">
                                        <i class="fas fa-city"></i>
                                        <p>No existen registros de ciudades</p>
                                        <small>Haz clic en "Crear Ciudad" para crear el primer registro</small>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Sección de Filiales -->
            <section class="branches-section">
                <div class="section-header">
                    <h2>Filiales</h2>
                    <div class="action-buttons">
                        <button id="bBuscarFilial" class="btn btn-primary" onclick="showBranchModal()">Buscar Filial</button>
                        <button id="bCrearFilial" class="btn btn-primary" onclick="showUpsertBranchModal('create')">Crear Filial</button>
                    </div>
                </div>

                <div class="data-table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Código</th>
                                <th>Nombre</th>
                                <th>Ciudad</th>
                                <th>Dirección</th>
                                <th>Teléfono</th>
                                <th>Opciones</th>
                            </tr>
                        </thead>
                        <tbody id="filialesTableBody">
                            <tr>
                                <td colspan="6" class="no-data-message">
                                    <div class="no-data-content">
                                        <i class="fas fa-building"></i>
                                        <p>No existen registros de filiales</p>
                                        <small>Haz clic en "Crear Filial" para crear el primer registro</small>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </main>



    <!-- ========================================
         MODALES DE INTERACCIÓN
         ======================================== -->
    
    <!-- Modal de Selección de Ciudad (al ingresar) -->
    <div class="modal-overlay" id="selectCityModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">SELECCIONAR CIUDAD</h3>
                <button class="modal-close" onclick="hideSelectCityModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="citySelect" class="form-label">Ciudad *</label>
                    <div class="select-container">
                        <select id="citySelect" class="form-select">
                            <option value="">Seleccione la ciudad</option>
                        </select>
                        <i class="fas fa-chevron-down select-arrow"></i>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="bSeleccionarCiudad">Seleccionar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Búsqueda de Ciudad -->
    <div class="modal-overlay" id="cityModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">BUSCAR CIUDAD</h3>
                <button class="modal-close" onclick="hideModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="searchCityCodigo" class="form-label">Código de ciudad *</label>
                    <input type="text" id="searchCityCodigo" class="form-input" placeholder="Ingrese el código de la ciudad">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal()">Cancelar</button>
                <button class="btn btn-primary" id="bBuscarCiudad">Buscar</button>
            </div>
        </div>
    </div>



    <!-- Modal de Crear Ciudad -->
    <div class="modal-overlay" id="createCityModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="createCityTitle">CREAR CIUDAD</h3>
                <button class="modal-close" onclick="hideCreateCityModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="tCodigo" class="form-label">Código *</label>
                    <input type="text" id="tCodigo" class="form-input" placeholder="Escribe Código de la ciudad">
                </div>
                <div class="form-group">
                    <label for="tNombre" class="form-label">Nombre *</label>
                    <input type="text" id="tNombre" class="form-input" placeholder="Escribe Nombre de la ciudad">
                </div>
                <div class="form-group">
                    <label for="tDireccion" class="form-label">Dirección *</label>
                    <input type="text" id="tDireccion" class="form-input" placeholder="Dirección de la ciudad">
                </div>
                <div class="form-group">
                    <label for="tTelefono" class="form-label">Teléfono *</label>
                    <input type="text" id="tTelefono" class="form-input" placeholder="Teléfono">
                </div>
                <div class="form-group">
                    <label for="tCorreo" class="form-label">Correo Electrónico *</label>
                    <input type="email" id="tCorreo" class="form-input" placeholder="Escribe el correo electrónico">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideCreateCityModal()">Cancelar</button>
                <button class="btn btn-primary" id="bCrear">Crear</button>
            </div>
        </div>
    </div>

    <!-- Modal de Búsqueda de Filial por Código de Ciudad -->
    <div class="modal-overlay" id="branchModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">BUSCAR FILIAL POR CIUDAD</h3>
                <button class="modal-close" onclick="hideBranchModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="searchCityCode" class="form-label">Código de ciudad *</label>
                    <input type="text" id="searchCityCode" class="form-input" placeholder="Ingrese el código de la ciudad">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideBranchModal()">Cancelar</button>
                <button class="btn btn-primary" id="bBuscarFilial">Buscar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Resultados de Búsqueda de Ciudad -->
    <div class="modal-overlay" id="cityResultsModal">
        <div class="modal modal-results">
            <div class="modal-header">
                <h3 class="modal-title">RESULTADOS DE BÚSQUEDA - CIUDAD</h3>
                <button class="modal-close" onclick="hideCityResultsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="data-table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Código</th>
                                <th>Nombre</th>
                                <th>Dirección</th>
                                <th>Teléfono</th>
                                <th>Correo</th>
                                <th>Opciones</th>
                            </tr>
                        </thead>
                        <tbody id="citySearchResultsBody">
                            <tr>
                                <td colspan="6" class="no-data-message">
                                    <div class="no-data-content">
                                        <i class="fas fa-search"></i>
                                        <p>No se encontraron resultados</p>
                                        <small>Intente con otro código</small>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideCityResultsModal()">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Resultados de Búsqueda de Filial -->
    <div class="modal-overlay" id="branchResultsModal">
        <div class="modal modal-results">
            <div class="modal-header">
                <h3 class="modal-title">RESULTADOS DE BÚSQUEDA - FILIALES</h3>
                <button class="modal-close" onclick="hideBranchResultsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="data-table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Código</th>
                                <th>Nombre</th>
                                <th>Ciudad</th>
                                <th>Dirección</th>
                                <th>Teléfono</th>
                                <th>Opciones</th>
                            </tr>
                        </thead>
                        <tbody id="branchSearchResultsBody">
                            <tr>
                                <td colspan="6" class="no-data-message">
                                    <div class="no-data-content">
                                        <i class="fas fa-search"></i>
                                        <p>No se encontraron resultados</p>
                                        <small>Intente con otro código de ciudad</small>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideBranchResultsModal()">Cerrar</button>
            </div>
        </div>
    </div>



    <!-- Modal Crear/Actualizar Filial -->
    <div class="modal-overlay" id="upsertBranchModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="upsertBranchTitle">CREAR FILIAL</h3>
                <button class="modal-close" onclick="hideUpsertBranchModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="fCodigo" class="form-label">Código *</label>
                    <input type="text" id="fCodigo" class="form-input" placeholder="Código de la filial">
                </div>
                <div class="form-group">
                    <label for="fNombre" class="form-label">Nombre *</label>
                    <input type="text" id="fNombre" class="form-input" placeholder="Nombre de la filial">
                </div>
                <div class="form-group">
                    <label for="fCiudad" class="form-label">Ciudad *</label>
                    <div class="select-container">
                        <select id="fCiudad" class="form-select">
                            <option value="">Seleccione la ciudad</option>
                        </select>
                        <i class="fas fa-chevron-down select-arrow"></i>
                    </div>
                </div>
                <div class="form-group">
                    <label for="fDireccion" class="form-label">Dirección</label>
                    <input type="text" id="fDireccion" class="form-input" placeholder="Dirección de la filial">
                </div>
                <div class="form-group">
                    <label for="fTelefono" class="form-label">Teléfono</label>
                    <input type="text" id="fTelefono" class="form-input" placeholder="Teléfono de la filial">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideUpsertBranchModal()">Cancelar</button>
                <button class="btn btn-primary" id="bGuardarFilial">Guardar</button>
            </div>
        </div>
    </div>

    <!-- ========================================
         MODALES DE CONFIRMACIÓN
         ======================================== -->
    
    <!-- Modal de confirmación para crear ciudad -->
    <div class="modal-overlay" id="confirmCreateCityModal">
        <div class="modal modal-confirm">
            <div class="modal-header">
                <h3>Confirmación</h3>
            </div>
            <div class="modal-body">
                <p>¿Está segur@ que quiere crear esta Ciudad?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="cancelCreateCity()">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="confirmCreateCity()">Aceptar</button>
            </div>
        </div>
    </div>

    <!-- Modal de éxito para crear ciudad -->
    <div class="modal-overlay" id="successCreateCityModal">
        <div class="modal modal-success">
            <div class="modal-body">
                <p>Se ha creado con éxito la Ciudad!</p>
                <button type="button" class="btn btn-primary" onclick="closeSuccessCityModal()">Volver</button>
            </div>
        </div>
    </div>

    <!-- Modal de confirmación para crear filial -->
    <div class="modal-overlay" id="confirmCreateBranchModal">
        <div class="modal modal-confirm">
            <div class="modal-header">
                <h3>Confirmación</h3>
            </div>
            <div class="modal-body">
                <p>¿Está segur@ que quiere crear esta Filial?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="cancelCreateBranch()">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="confirmCreateBranch()">Aceptar</button>
            </div>
        </div>
    </div>

    <!-- Modal de éxito para crear filial -->
    <div class="modal-overlay" id="successCreateBranchModal">
        <div class="modal modal-success">
            <div class="modal-body">
                <p>Se ha creado con éxito la Filial!</p>
                <button type="button" class="btn btn-primary" onclick="closeSuccessBranchModal()">Volver</button>
            </div>
        </div>
    </div>

    <!-- Modal de confirmación para actualizar ciudad -->
    <div class="modal-overlay" id="confirmUpdateCityModal">
        <div class="modal modal-confirm">
            <div class="modal-header">
                <h3>Confirmación</h3>
            </div>
            <div class="modal-body">
                <p>¿Está segur@ que quiere actualizar esta Ciudad?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="cancelUpdateCity()">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="confirmUpdateCity()">Aceptar</button>
            </div>
        </div>
    </div>

    <!-- Modal de éxito para actualizar ciudad -->
    <div class="modal-overlay" id="successUpdateCityModal">
        <div class="modal modal-success">
            <div class="modal-body">
                <p>Se ha actualizado con éxito la Ciudad!</p>
                <button type="button" class="btn btn-primary" onclick="closeSuccessUpdateCityModal()">Volver</button>
            </div>
        </div>
    </div>

    <!-- Modal de confirmación para actualizar filial -->
    <div class="modal-overlay" id="confirmUpdateBranchModal">
        <div class="modal modal-confirm">
            <div class="modal-header">
                <h3>Confirmación</h3>
            </div>
            <div class="modal-body">
                <p>¿Está segur@ que quiere actualizar esta Filial?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="cancelUpdateBranch()">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="confirmUpdateBranch()">Aceptar</button>
            </div>
        </div>
    </div>

    <!-- Modal de éxito para actualizar filial -->
    <div class="modal-overlay" id="successUpdateBranchModal">
        <div class="modal modal-success">
            <div class="modal-body">
                <p>Se ha actualizado con éxito la Filial!</p>
                <button type="button" class="btn btn-primary" onclick="closeSuccessUpdateBranchModal()">Volver</button>
            </div>
        </div>
    </div>

    <!-- Modal de confirmación para eliminar ciudad -->
    <div class="modal-overlay" id="confirmDeleteCityModal">
        <div class="modal modal-confirm">
            <div class="modal-header">
                <h3>Confirmación</h3>
            </div>
            <div class="modal-body">
                <p>¿Está segur@ que quiere eliminar esta Ciudad?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="cancelDeleteCity()">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="confirmDeleteCity()">Eliminar</button>
            </div>
        </div>
    </div>

    <!-- Modal de éxito para eliminar ciudad -->
    <div class="modal-overlay" id="successDeleteCityModal">
        <div class="modal modal-success">
            <div class="modal-body">
                <p>Se ha eliminado con éxito la Ciudad!</p>
                <button type="button" class="btn btn-primary" onclick="closeSuccessDeleteCityModal()">Volver</button>
            </div>
        </div>
    </div>

    <!-- Modal de confirmación para eliminar filial -->
    <div class="modal-overlay" id="confirmDeleteBranchModal">
        <div class="modal modal-confirm">
            <div class="modal-header">
                <h3>Confirmación</h3>
            </div>
            <div class="modal-body">
                <p>¿Está segur@ que quiere eliminar esta Filial?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="cancelDeleteBranch()">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="confirmDeleteBranch()">Eliminar</button>
            </div>
        </div>
    </div>

    <!-- Modal de éxito para eliminar filial -->
    <div class="modal-overlay" id="successDeleteBranchModal">
        <div class="modal modal-success">
            <div class="modal-body">
                <p>Se ha eliminado con éxito la Filial!</p>
                <button type="button" class="btn btn-primary" onclick="closeSuccessDeleteBranchModal()">Volver</button>
            </div>
        </div>
    </div>

    <!-- ========================================
         SCRIPTS
         ======================================== -->
    
    <!-- JavaScript -->
    <script src="../assets/js/admin-ciudades.js"></script>
</body>
</html> 